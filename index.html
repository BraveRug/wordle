<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Letter Frequency</title>
  <link href="https://fonts.googleapis.com/css2?family=Didact+Gothic&display=swap" rel="stylesheet">
  <style>
    /* Core Variables */
    :root {
      --bg: #ffffff;
      --text: #111;
      --accent: #0077cc;
      --input-bg: #f0f0f0;
      --card-bg: #ffffff;
    }

    /* Theme Definitions */
    body.light {
      --bg: #ffffff;
      --text: #111;
      --accent: #0077cc;
      --input-bg: #f0f0f0;
      --card-bg: #ffffff;
    }
    body.solarized { /* Polarized */
      --bg: #fdf6e3;
      --text: #657b83;
      --accent: #268bd2;
      --input-bg: #f5f2dd;
      --card-bg: #eee8d5;
    }
    body.cherry { /* Red Light */
      --bg: #ffe6e6;
      --text: #5a0000;
      --accent: #cc0000;
      --input-bg: #ffd6d6;
      --card-bg: #ffcccc;
    }
    body.peach { /* Orange Light */
      --bg: #fff1e6;
      --text: #6b4226;
      --accent: #ff7f50;
      --input-bg: #ffedd5;
      --card-bg: #ffe5d9;
    }
    body.sunshine { /* Yellow Light */
      --bg: #fffde7;
      --text: #6b4a2b;
      --accent: #fbc02d;
      --input-bg: #fff59d;
      --card-bg: #fffbc0;
    }
    body.forest { /* Green Light */
      --bg: #e7f5e9;
      --text: #2d4739;
      --accent: #2e8b57;
      --input-bg: #c8e6c9;
      --card-bg: #d0f0d8;
    }
    body.ocean { /* Cyan Light */
      --bg: #e0f7fa;
      --text: #004d40;
      --accent: #00acc1;
      --input-bg: #b2ebf2;
      --card-bg: #e0f2f1;
    }
    body.azure { /* Cornflower Blue Light */
      --bg: #f0f8ff;
      --text: #003366;
      --accent: #3399ff;
      --input-bg: #e0f0ff;
      --card-bg: #d6ecff;
    }
    body.bluelight { /* Normal Blue Light */
      --bg: #e6f2ff;
      --text: #003366;
      --accent: #007bff;
      --input-bg: #cce5ff;
      --card-bg: #e0f4ff;
    }
    body.violetlight { /* Bluish Purple Light */
      --bg: #f3e5f5;
      --text: #311b92;
      --accent: #7e57c2;
      --input-bg: #d1c4e9;
      --card-bg: #e0d7f7;
    }
    body.plum { /* Normal Purple Light */
      --bg: #f9f4fc;
      --text: #4b0082;
      --accent: #9c27b0;
      --input-bg: #f0e5f9;
      --card-bg: #ede7f6;
    }
    body.reddishpurple { /* Reddish Purple Light */
      --bg: #fdf1f5;
      --text: #880e4f;
      --accent: #ad1457;
      --input-bg: #f3dce6;
      --card-bg: #f8e1ec;
    }
    body.blush { /* Light Pink Light */
      --bg: #ffeef8;
      --text: #880e4f;
      --accent: #f06292;
      --input-bg: #ffe0eb;
      --card-bg: #ffd6e9;
    }
    body.rose { /* Hot Pink Light */
      --bg: #fff0f5;
      --text: #880e4f;
      --accent: #d81b60;
      --input-bg: #ffe4ec;
      --card-bg: #f8bbd0;
    }
    body.brownlight { /* Brown Light */
      --bg: #f5f0e6;
      --text: #4e342e;
      --accent: #8d6e63;
      --input-bg: #efebe9;
      --card-bg: #e0d7d1;
    }
    body.greyscale { /* Grey Light */
      --bg: #f5f5f5;
      --text: #333;
      --accent: #999;
      --input-bg: #ddd;
      --card-bg: #eee;
    }

    /* Dark Themes */
    body.dark {
      --bg: #121212;
      --text: #e0e0e0;
      --accent: #4a90e2;
      --input-bg: #2a2a2a;
      --card-bg: #1e1e1e;
    }
    body.midnight {
      --bg: #0d1b2a;
      --text: #e0e1dd;
      --accent: #415a77;
      --input-bg: #1b263b;
      --card-bg: #1e2a3a;
    }
    body.reddark {
      --bg: #2b1a1a;
      --text: #ffcfcf;
      --accent: #ff4d4d;
      --input-bg: #3a1f1f;
      --card-bg: #342020;
    }

    body.orangedark {
      --bg: #2e2115;
      --text: #ffddb3;
      --accent: #ff944d;
      --input-bg: #3c2a1a;
      --card-bg: #352518;
    }

    body.yellowdark {
      --bg: #2f2b1a;
      --text: #fff7cc;
      --accent: #ffde59;
      --input-bg: #3d391f;
      --card-bg: #35321a;
    }

    body.greendark {
      --bg: #1a2b1a;
      --text: #c2ffc2;
      --accent: #66bb6a;
      --input-bg: #243524;
      --card-bg: #1f2e1f;
    }

    body.cyandark {
      --bg: #102b2b;
      --text: #b2ffff;
      --accent: #26c6da;
      --input-bg: #1a3c3c;
      --card-bg: #173636;
    }

    body.azuredark {
      --bg: #162339;
      --text: #ccddff;
      --accent: #3399ff;
      --input-bg: #21304a;
      --card-bg: #1d2a40;
    }

    body.deepsea {
      --bg: #152233;
      --text: #a8dfff;
      --accent: #33cccc;
      --input-bg: #1e2e44;
      --card-bg: #1a283c;
    }

    body.violetnight {
      --bg: #1e1b2e;
      --text: #b9b4d9;
      --accent: #a18aff;
      --input-bg: #2a263f;
      --card-bg: #26233a;
    }

    body.purpledark {
      --bg: #1f152e;
      --text: #d2c8ff;
      --accent: #9575cd;
      --input-bg: #2d1f44;
      --card-bg: #281d3c;
    }

    body.merlot {
      --bg: #271520;
      --text: #ffcce0;
      --accent: #e91e63;
      --input-bg: #3a1a29;
      --card-bg: #311624;
    }
    body.lightpinkdark {
      --bg: #2a1a24;
      --text: #ffd9e6;
      --accent: #f48fb1;
      --input-bg: #3c1f2d;
      --card-bg: #341b28;
    }

    body.hotpinkdark {
      --bg: #2f1424;
      --text: #ffccd9;
      --accent: #ec407a;
      --input-bg: #401a2e;
      --card-bg: #371827;
    }

    body.browndark {
      --bg: #261b15;
      --text: #e0d6d2;
      --accent: #a1887f;
      --input-bg: #3a2b26;
      --card-bg: #2f221d;
    }

    body.charcoal { /* Grey Dark */
      --bg: #1c1c1c;
      --text: #f5f5f5;
      --accent: #888;
      --input-bg: #2b2b2b;
      --card-bg: #252525;
    }

    /* Global Styles */
    * { box-sizing: border-box; font-family: 'Didact Gothic', sans-serif; transition: background-color 0.3s, color 0.3s; }
    body { margin:0; background:var(--bg); color:var(--text); display:flex; flex-direction:column; align-items:center; padding:40px 20px; min-height:100vh; }
    h2 { margin-bottom:20px; text-align:center; }
    .container { background:var(--card-bg); padding:25px; border-radius:12px; box-shadow:0 4px 20px rgba(0,0,0,0.15); width:100%; max-width:500px; position:relative; }
    input { width:100%; padding:12px; font-size:1em; border:none; border-radius:8px; background:var(--input-bg); color:var(--text); margin-bottom:20px; }
    input::placeholder { color:#888; }
    .result-box { background:var(--input-bg); padding:16px; border-radius:10px; font-family:'Courier New', monospace; white-space:pre-wrap; font-size:1em; color:var(--text); }
    .theme-btn { margin-top:10px; background:var(--accent); color:white; padding:10px 14px; border:none; border-radius:8px; font-size:0.95em; cursor:pointer; }
    .modal { position:fixed; top:0; left:0; right:0; bottom:0; display:none; justify-content:center; align-items:center; background:rgba(0,0,0,0.5); z-index:100; }
    .modal-content { background:var(--card-bg); padding:20px; border-radius:12px; width:90%; max-width:400px; text-align:center; position:relative; max-height:80vh; overflow-y:auto; }
    .close-btn { position:absolute; top:10px; right:15px; background:none; border:none; font-size:1.2em; color:var(--text); cursor:pointer; }
    .theme-section { text-align:left; margin-top:15px; }
    .theme-section h3 { margin-bottom:10px; font-size:1em; border-bottom:1px solid var(--input-bg); padding-bottom:5px; }
    .theme-option { display:block; width:100%; padding:12px; margin:6px 0; border:none; border-radius:8px; font-size:1em; cursor:pointer; color:white; }

    /* Settings Modal & Layout Options */
    #settingsIconBtn { /* Already has inline styles, but can be enhanced here if needed */
      padding: 5px; /* Ensure it's not too large */
    }
    .settings-section h3 {
      margin-top: 20px;
      margin-bottom: 10px;
      font-size: 1.1em;
      color: var(--text);
      border-bottom: 1px solid var(--input-bg);
      padding-bottom: 8px;
    }
    .layout-option {
      cursor: pointer;
      padding: 10px;
      border-radius: 8px;
      text-align: center;
      background-color: var(--input-bg);
      color: var(--text);
      width: calc(50% - 10px); /* Two options side-by-side */
      transition: background-color 0.2s;
    }
    .layout-option:hover {
      background-color: var(--accent);
      color: white;
    }
    .layout-icon {
      font-size: 1.5em; /* Larger icon */
      margin-bottom: 5px;
      font-family: 'Courier New', monospace; /* For a blocky look */
    }

    /* Content Area Layouts */
    .content-area {
      display: flex;
      width: 100%;
    }

    /* Default: Side-by-Side Layout */
    .content-area {
      flex-direction: row;
      justify-content: space-between;
      gap: 20px; /* Adds space between input and result */
    }
    #wordInput { /* Textarea now */
      flex-basis: calc(50% - 10px);
      padding: 12px;
      font-size: 1em;
      border: none;
      border-radius: 8px;
      background: var(--input-bg);
      color: var(--text);
      margin-bottom: 0; /* Remove bottom margin if side-by-side */
      resize: vertical; /* Allow vertical resize, not horizontal */
      min-height: 100px; /* Minimum height for textarea */
      white-space: pre-wrap; /* Ensure textarea wraps words */
      word-wrap: break-word; /* Ensure textarea wraps words */
    }
    .result-box {
      flex-basis: calc(50% - 10px);
      align-self: stretch; /* Make it same height as textarea if possible */
    }

    /* Original Layout Override */
    body.layout-original .content-area {
      flex-direction: column;
      gap: 20px; /* Gap between input and result when stacked */
    }
    body.layout-original #wordInput {
      flex-basis: auto; /* Full width */
      width: 100%;
      margin-bottom: 20px; /* Add margin back for original layout */
    }
    body.layout-original .result-box {
      flex-basis: auto; /* Full width */
      width: 100%;
    }

    /* Ensure textarea styling is consistent with original input */
    textarea#wordInput::placeholder { color:#888; }


    /* Button Colors */
    .light-btn { background:#0077cc; }
    .solarized-btn { background:#268bd2; }
    .cherry-btn { background:#cc0000; }
    .peach-btn { background:#ff7f50; }
    .sunshine-btn { background:#fbc02d; color:#000; }
    .forest-btn { background:#2e8b57; }
    .ocean-btn { background:#00acc1; }
    .azure-btn { background:#3399ff; }
    .bluelight-btn { background:#007bff; }
    .violetlight-btn { background:#7e57c2; }
    .plum-btn { background:#9c27b0; }
    .reddishpurple-btn { background:#ad1457; }
    .blush-btn { background:#f06292; }
    .rose-btn { background:#d81b60; }
    .brownlight-btn { background:#8d6e63; }
    .greyscale-btn { background:#888; }
    .dark-btn { background:#333; }
    .midnight-btn { background:#415a77; }
    .reddark-btn { background:#cc0000; }
    .orangedark-btn { background:#ff7f00; }
    .yellowdark-btn { background:#ffc107; }
    .greendark-btn { background:#2e7d32; }
    .cyandark-btn { background:#00acc1; }
    .azuredark-btn { background:#3399ff; }
    .deepsea-btn { background:#39cccc; }
    .violetnight-btn { background:#a18aff; }
    .purpledark-btn { background:#7e57c2; }
    .merlot-btn { background:#c2185b; }
    .lightpinkdark-btn { background:#f06292; }
    .hotpinkdark-btn { background:#d81b60; }
    .browndark-btn { background:#8d6e63; }
    .charcoal-btn { background:#444; }
  </style>
</head>
<body class="light">
  <h2>Letter Frequency</h2>
  <div class="container">
    <div id="settingsButtonContainer" style="position: absolute; top: 10px; right: 10px;">
      <button id="settingsIconBtn" style="background: none; border: none; font-size: 1.5em; cursor: pointer; color: var(--text);" onclick="openModal()">⚙️</button>
    </div>
    <div class="content-area">
      <textarea id="wordInput" placeholder="Type words here..." oninput="countLetters()"></textarea>
      <div id="result" class="result-box"></div>
    </div>
    <!-- Theme button removed from here -->
  </div>
  <div class="modal" id="settingsModal"> <!-- Renamed id -->
    <div class="modal-content">
      <button class="close-btn" onclick="closeModal()">✕</button>

      <div class="settings-section"> <!-- New section for layout -->
        <h3>Layout Options</h3>
        <div style="display: flex; justify-content: space-around; margin-bottom: 20px;">
          <div id="layout-side-by-side" class="layout-option" onclick="setLayout('side-by-side')">
            <div class="layout-icon">[ | ]</div>
            <div>Side-by-Side</div>
          </div>
          <div id="layout-original" class="layout-option" onclick="setLayout('original')">
            <div class="layout-icon">[---]</div>
            <div>Original</div>
          </div>
        </div>
      </div>

      <h3>Select a Theme</h3> <!-- Moved Theme button functionality here -->
      <div class="theme-section">
        <h3>Light Themes</h3>
        <button class="theme-option light-btn" onclick="setTheme('light')">Light</button>
        <button class="theme-option solarized-btn" onclick="setTheme('solarized')">Polarized</button>
        <button class="theme-option cherry-btn" onclick="setTheme('cherry')">Red Light</button>
        <button class="theme-option peach-btn" onclick="setTheme('peach')">Orange Light</button>
        <button class="theme-option sunshine-btn" onclick="setTheme('sunshine')">Yellow Light</button>
        <button class="theme-option forest-btn" onclick="setTheme('forest')">Green Light</button>
        <button class="theme-option ocean-btn" onclick="setTheme('ocean')">Cyan Light</button>
        <button class="theme-option azure-btn" onclick="setTheme('azure')">Cornflower Blue Light</button>
        <button class="theme-option bluelight-btn" onclick="setTheme('bluelight')">Normal Blue Light</button>
        <button class="theme-option violetlight-btn" onclick="setTheme('violetlight')">Bluish Purple Light</button>
        <button class="theme-option plum-btn" onclick="setTheme('plum')">Normal Purple Light</button>
        <button class="theme-option reddishpurple-btn" onclick="setTheme('reddishpurple')">Reddish Purple Light</button>
        <button class="theme-option blush-btn" onclick="setTheme('blush')">Light Pink Light</button>
        <button class="theme-option rose-btn" onclick="setTheme('rose')">Hot Pink Light</button>
        <button class="theme-option brownlight-btn" onclick="setTheme('brownlight')">Brown Light</button>
        <button class="theme-option greyscale-btn" onclick="setTheme('greyscale')">Grey Light</button>
      </div>
      <div class="theme-section">
        <h3>Dark Themes</h3>
        <button class="theme-option dark-btn" onclick="setTheme('dark')">Dark</button>
        <button class="theme-option midnight-btn" onclick="setTheme('midnight')">Midnight</button>
        <button class="theme-option reddark-btn" onclick="setTheme('reddark')">Red Dark</button>
        <button class="theme-option orangedark-btn" onclick="setTheme('orangedark')">Orange Dark</button>
        <button class="theme-option yellowdark-btn" onclick="setTheme('yellowdark')">Yellow Dark</button>
        <button class="theme-option greendark-btn" onclick="setTheme('greendark')">Green Dark</button>
        <button class="theme-option cyandark-btn" onclick="setTheme('cyandark')">Cyan Dark</button>
        <button class="theme-option azuredark-btn" onclick="setTheme('azuredark')">Cornflower Blue Dark</button>
        <button class="theme-option deepsea-btn" onclick="setTheme('deepsea')">Normal Blue Dark</button>
        <button class="theme-option violetnight-btn" onclick="setTheme('violetnight')">Bluish Purple Dark</button>
        <button class="theme-option purpledark-btn" onclick="setTheme('purpledark')">Normal Purple Dark</button>
        <button class="theme-option merlot-btn" onclick="setTheme('merlot')">Reddish Purple Dark</button>
        <button class="theme-option lightpinkdark-btn" onclick="setTheme('lightpinkdark')">Light Pink Dark</button>
        <button class="theme-option hotpinkdark-btn" onclick="setTheme('hotpinkdark')">Hot Pink Dark</button>
        <button class="theme-option browndark-btn" onclick="setTheme('browndark')">Brown Dark</button>
        <button class="theme-option charcoal-btn" onclick="setTheme('charcoal')">Grey Dark</button>
      </div>
    </div>
  </div>
  <script>
    function countLetters() {
      const input = document.getElementById('wordInput').value.toLowerCase();
      const words = input.match(/\b\w+\b/g) || [];
      const letterMap = {};
      words.forEach(word => {
        const uniqueLetters = new Set(word.replace(/[^a-z]/g, ''));
        uniqueLetters.forEach(letter => {
          letterMap[letter] = (letterMap[letter] || 0) + 1;
        });
      });
      const sorted = Object.entries(letterMap).sort((a, b) => b[1] - a[1] || a[0].localeCompare(b[0]));
      const output = sorted.map(([letter, count]) => `${letter}: ${count}`).join('\n');
      document.getElementById('result').textContent = output || 'No letters found.';
    }
    function setTheme(theme) {
      // Preserve layout class when changing theme
      const currentLayoutClass = document.body.classList.contains('layout-original') ? 'layout-original' : '';
      document.body.className = theme; // This overwrites all classes
      if (currentLayoutClass) {
        document.body.classList.add(currentLayoutClass);
      }
      localStorage.setItem('selectedTheme', theme);
      closeModal(); // Close settings modal after theme selection
    }

    function applyLayout(layoutName) {
      if (layoutName === 'original') {
        document.body.classList.add('layout-original');
      } else { // 'side-by-side' or default
        document.body.classList.remove('layout-original');
      }
    }

    function setLayout(layoutName) {
      applyLayout(layoutName);
      localStorage.setItem('selectedLayout', layoutName);
      // No need to close modal here, user might want to change theme too
    }

    function openModal() {
      document.getElementById('settingsModal').style.display = 'flex';
    }
    function closeModal() {
      document.getElementById('settingsModal').style.display = 'none';
    }

    function initializePage() {
      const savedTheme = localStorage.getItem('selectedTheme') || 'light';
      const savedLayout = localStorage.getItem('selectedLayout') || 'side-by-side';

      document.body.className = savedTheme; // Apply theme first
      applyLayout(savedLayout); // Then apply layout

      countLetters(); // Initial calculation
    }

    initializePage(); // Call initialization function
  </script>
</body>
</html>
