<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Letter Frequency</title>
  <link href="https://fonts.googleapis.com/css2?family=Didact+Gothic&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #ffffff;
      --text: #000000;
      --accent: #007acc;
      --input-bg: #f0f0f0;
      --card-bg: #e6e6e6;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Didact Gothic', sans-serif;
      background: var(--bg);
      color: var(--text);
      margin: 0;
      padding: 2rem 1rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: background 0.3s, color 0.3s;
    }

    h1 {
      margin-bottom: 1rem;
    }

    textarea {
      width: 100%;
      max-width: 500px;
      height: 100px;
      padding: 10px;
      font-size: 1rem;
      background: var(--input-bg);
      color: var(--text);
      border: 2px solid var(--accent);
      border-radius: 10px;
      resize: vertical;
      margin-bottom: 1rem;
    }

    .output {
      font-family: 'Courier New', monospace;
      white-space: pre-line;
      background: var(--card-bg);
      padding: 1rem;
      width: 100%;
      max-width: 500px;
      border-radius: 10px;
    }

    .theme-button {
      margin-top: 1rem;
      background: var(--accent);
      color: var(--bg);
      border: none;
      border-radius: 6px;
      padding: 10px 20px;
      cursor: pointer;
      font-weight: bold;
    }

    .overlay, .modal {
      display: none;
      position: fixed;
      z-index: 1000;
    }

    .overlay {
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.4);
    }

    .modal {
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: var(--bg);
      color: var(--text);
      border-radius: 12px;
      padding: 1.5rem;
      width: 90%;
      max-width: 400px;
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
      flex-direction: column;
      align-items: center;
    }

    .modal h3 {
      margin-top: 0;
    }

    .theme-option {
      margin: 5px;
      padding: 6px 12px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }

    .theme-editor {
      margin-top: 1rem;
      width: 100%;
    }

    .theme-editor label {
      display: flex;
      justify-content: space-between;
      margin: 4px 0;
      font-size: 0.95rem;
    }

    .theme-editor input {
      margin-left: 10px;
    }

    .close-btn {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 1.2rem;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>Letter Frequency</h1>
  <textarea id="inputText" placeholder="Type words here..."></textarea>
  <div class="output" id="outputBox"></div>
  <button class="theme-button" onclick="openThemeModal()">Themes</button>

  <div class="overlay" id="overlay" onclick="closeThemeModal()"></div>

  <div class="modal" id="themeModal">
    <span class="close-btn" onclick="closeThemeModal()">âœ•</span>
    <h3>Select a Theme</h3>
    <div style="display: flex; flex-wrap: wrap; justify-content: center;">
      <button class="theme-option" style="background:#fff; color:#000;" onclick="setTheme('light')">Light</button>
      <button class="theme-option" style="background:#121212; color:#eee;" onclick="setTheme('dark')">Dark</button>
      <button class="theme-option" style="background:#fdf6e3; color:#657b83;" onclick="setTheme('solarized')">Solarized</button>
      <button class="theme-option" style="background:#0a0a23; color:#fff;" onclick="setTheme('midnight')">Midnight</button>
      <button class="theme-option" style="background:#ffefd5; color:#a0522d;" onclick="setTheme('peach')">Peach</button>
      <button class="theme-option" style="background:#0b3d0b; color:#cfe8cf;" onclick="setTheme('forest')">Forest</button>
      <button class="theme-option" style="background:#1a0033; color:#dcdcff;" onclick="setTheme('galaxy')">Galaxy</button>
      <button class="theme-option" style="background:var(--accent); color:var(--text);" onclick="setTheme('custom')">Custom</button>
    </div>

    <div id="customThemeEditor" class="theme-editor" style="display: none;">
      <h4>Custom Theme</h4>
      <label>Background <input type="color" onchange="updateCustom('--bg', this.value)"></label>
      <label>Text <input type="color" onchange="updateCustom('--text', this.value)"></label>
      <label>Accent <input type="color" onchange="updateCustom('--accent', this.value)"></label>
      <label>Input BG <input type="color" onchange="updateCustom('--input-bg', this.value)"></label>
      <label>Card BG <input type="color" onchange="updateCustom('--card-bg', this.value)"></label>
    </div>
  </div>

  <script>
    const input = document.getElementById('inputText');
    const output = document.getElementById('outputBox');

    input.addEventListener('input', () => {
      const text = input.value.toLowerCase().replace(/[^a-z\s]/g, '');
      const words = text.split(/\s+/);
      const counts = {};

      for (const word of words) {
        const unique = new Set(word);
        unique.forEach(letter => {
          if (letter) counts[letter] = (counts[letter] || 0) + 1;
        });
      }

      const sorted = Object.entries(counts).sort((a, b) => b[1] - a[1]);
      output.textContent = sorted.map(([l, c]) => `${l}: ${c}`).join('\n');
    });

    function openThemeModal() {
      document.getElementById('overlay').style.display = 'block';
      document.getElementById('themeModal').style.display = 'flex';
    }

    function closeThemeModal() {
      document.getElementById('overlay').style.display = 'none';
      document.getElementById('themeModal').style.display = 'none';
    }

    function setTheme(name) {
      const root = document.documentElement;
      const editor = document.getElementById('customThemeEditor');
      editor.style.display = name === 'custom' ? 'block' : 'none';

      const themes = {
        light:    { '--bg': '#ffffff', '--text': '#000000', '--accent': '#007acc', '--input-bg': '#f0f0f0', '--card-bg': '#e6e6e6' },
        dark:     { '--bg': '#121212', '--text': '#ffffff', '--accent': '#bb86fc', '--input-bg': '#1e1e1e', '--card-bg': '#2a2a2a' },
        solarized:{ '--bg': '#fdf6e3', '--text': '#657b83', '--accent': '#b58900', '--input-bg': '#eee8d5', '--card-bg': '#fefef0' },
        midnight: { '--bg': '#0a0a23', '--text': '#ffffff', '--accent': '#ff4081', '--input-bg': '#1a1a40', '--card-bg': '#1f1f2f' },
        peach:    { '--bg': '#ffefd5', '--text': '#a0522d', '--accent': '#ffa07a', '--input-bg': '#ffe4c4', '--card-bg': '#fcd5b5' },
        forest:   { '--bg': '#0b3d0b', '--text': '#cfe8cf', '--accent': '#3cb371', '--input-bg': '#1f5c1f', '--card-bg': '#2e8b57' },
        galaxy:   { '--bg': '#1a0033', '--text': '#dcdcff', '--accent': '#8a2be2', '--input-bg': '#2a0050', '--card-bg': '#130022' },
        custom:   {}
      };

      if (themes[name]) {
        for (const [varName, value] of Object.entries(themes[name])) {
          root.style.setProperty(varName, value);
        }
      }
    }

    function updateCustom(variable, value) {
      document.documentElement.style.setProperty(variable, value);
    }

    // Set default
    setTheme('light');
  </script>
</body>
</html>
